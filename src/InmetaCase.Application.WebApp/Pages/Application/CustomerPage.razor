@page "/customer/{id:int}"
@using InmetaCase.Application.WebApp.Pages.Application.Components
@using InmetaCase.Business;

<MudStack>
    <MudLink Href="@ViewControl.Customer.NewOrderUri()">New order</MudLink>
    <MudExpansionPanels MultiExpansion="true">
        <MudExpansionPanel Text="Personalia" IsInitiallyExpanded=true>
            <CustomerComponent Customer="ViewControl.Customer" />
        </MudExpansionPanel>
        <MudExpansionPanel Text="Address" IsInitiallyExpanded=false>
            <AddressComponent Address="ViewControl.Address" OnSave="ViewControl.SaveAddress"/>
        </MudExpansionPanel>
        <MudExpansionPanel Text="Orders">
            <MudList>
                @foreach(var order in ViewControl.Orders)
                {
                    <MudListItem>
                        <MudLink Href="@order.PageUri()">@order.Presentation()</MudLink>
                    </MudListItem>
                }
            </MudList>
        </MudExpansionPanel>
    </MudExpansionPanels>
    
</MudStack>
